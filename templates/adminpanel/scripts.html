{% comment %} Este archivo se incluye al final de las páginas para cargar JS necesario {% endcomment %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+STmQ/r7iM6V/n4QuJZTQ21fQrJv2" crossorigin="anonymous"></script>

<!-- Select2 -->
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  // Inicializar Select2 para todos los selects con clase .select2
  document.addEventListener('DOMContentLoaded', function() {
    const selects = document.querySelectorAll('select.select2');
    selects.forEach(select => {
      $(select).select2({
        theme: 'bootstrap-5',
        width: '100%',
        dropdownParent: $(select).parent()
      });
    });

    // Inicializar tooltips de Bootstrap
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    tooltipTriggerList.map(function (tooltipTriggerEl) {
      return new bootstrap.Tooltip(tooltipTriggerEl)
    });

    // Validaciones básicas con Bootstrap 5 para formularios
    (function () {
      'use strict'

      // Fetch todos los formularios a validar
      var forms = document.querySelectorAll('.needs-validation')

      // Loop y evitar envío si hay errores
      Array.prototype.slice.call(forms)
        .forEach(function (form) {
          form.addEventListener('submit', function (event) {
            if (!form.checkValidity()) {
              event.preventDefault()
              event.stopPropagation()
            }
            form.classList.add('was-validated')
          }, false)
        })
    })()

  });
</script>
